<html ng-app="adminHuntApp" ng-controller="adminHuntCtrl">
  <head>
    <title>Admin Console</title>
  </head>
  <body>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.2/angular.min.js"></script>

    <h1>{{hunt.Name}}</h1>

    <p>
      <h3>State</h3>
      Current state: <b>{{stateTable[hunt.State]}}</b><br>
      <span ng-show="advanceable">
	Next state: <b>{{stateTable[hunt.State + 1]}}</b><br>
	<button ng-click="advanceState()">Advance state</button>
      </span>
    </p>

    <span ng-show="hasPuzzles">
      <p>
	<h3>Puzzles</h3>
	<table>
	  <tr>
	    <td>Number</td>
	    <td>Paper</td>
	    <td>Team</td>
	    <td>Name</td>
	    <td>Answer</td>
	  </tr>
	  <tr ng-repeat="p in puzzles">
	    <td>{{p.Number}}</td>
	    <td>{{p.Paper}}</td>
	    <td>{{p.TeamName}}</td>
	    <td>{{p.Name}}</td>
	    <td>{{p.Answer}}</td>
	  </tr>
	</table>
      </p>
    </span>

    <span ng-show="editable">
      <p>
	<h3>Add new team:</h3>
	<form novalidate>
	  Name: <input type="text" ng-model="newTeamName"><br>
	  Password: <input type="text" ng-model="newTeamPassword"><br>
	  Novice: <input type="checkbox" ng-model="newTeamNovice"><br>
	  <button ng-click="addTeam()">Add</button>
	</form>
      </p>
    </span>

    <p>
      <h3>Teams</h3>
      <table>
	<tr>
	  <td>Name</td>
	  <td>Password</td>
	  <td>Novice</td>
	  <td>Delete</td>
	</tr>
	<tr ng-repeat="t in teams">
	  <td>{{t.Name}}</td>
	  <td>{{t.Password}}</td>
	  <td>{{t.Novice}}</td>
	  <td><button ng-click="deleteTeam(t.ID)">Delete</button></td>o
	</tr>
      </table>
    </p>

    <p>
      <h3>Ingredients</h3>
      <form novalidate>
	Ingredients: <input type="text" ng-disabled="!editable" ng-model="hunt.Ingredients"><br>
	<button ng-click="updateIngredients(hunt.Ingredients)" ng-show="editable">Update ingredients</button>
      </form>
    </p>

    <script>huntId={(.)}</script>
    <script src="/admin/js/admin_hunt.js"></script>
  </body>
</html>
